<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#667eea">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%23667eea'/%3E%3Cpath d='M8 12h16v2H8zm0 4h12v2H8zm0 4h14v2H8z' fill='%23fff'/%3E%3Ccircle cx='24' cy='24' r='4' fill='%23FFB6C1'/%3E%3Cpath d='M22 24h4m-2-2v4' stroke='%23fff' stroke-width='1' stroke-linecap='round'/%3E%3C/svg%3E">
    <meta name="description" content="고급 기능을 포함한 직관적인 할 일 관리 앱">
    <title>✨ 할 일 관리 Pro ✨</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="할 일 관리">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-top">
                <h1 class="title">📋 할 일 관리 Pro</h1>
                <div class="header-controls">
                    <button id="darkModeToggle" class="dark-mode-toggle" aria-label="다크모드 전환" title="다크모드 전환">
                        🌙
                    </button>
                    <button id="dashboardToggle" class="dashboard-toggle" aria-label="통계 대시보드" title="통계 대시보드">
                        📊
                    </button>
                </div>
            </div>
            <p class="subtitle">효율적인 일상 관리 💼</p>
        </header>

        <!-- 검색 섹션 -->
        <section class="search-section" aria-label="할 일 검색">
            <div class="search-container">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="할 일 검색... 🔍" 
                    aria-label="할 일 검색"
                    autocomplete="off"
                >
                <button id="clearSearch" class="clear-search-btn" title="검색 초기화" style="display: none;">
                    ✕
                </button>
            </div>
        </section>

        <section class="input-section" aria-label="새 할 일 추가">
            <div class="input-container">
                <input 
                    type="text" 
                    id="todoInput" 
                    placeholder="할 일을 입력하세요 📝" 
                    maxlength="100"
                    aria-label="할 일 입력"
                    autocomplete="off"
                >
                <button id="addBtn" class="add-btn" aria-label="할 일 추가" title="할 일 추가 (Enter)">
                    <span>✚</span>
                </button>
            </div>
            
            <!-- 할 일 추가 옵션 -->
            <div class="todo-options">
                <div class="option-group">
                    <label for="categorySelect" class="option-label">카테고리:</label>
                    <select id="categorySelect" class="category-select">
                        <option value="개인">🙋‍♂️ 개인</option>
                        <option value="업무">💼 업무</option>
                        <option value="취미">🎨 취미</option>
                        <option value="건강">💪 건강</option>
                        <option value="학습">📚 학습</option>
                        <option value="쇼핑">🛒 쇼핑</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label for="prioritySelect" class="option-label">우선순위:</label>
                    <select id="prioritySelect" class="priority-select">
                        <option value="3">🔴 높음</option>
                        <option value="2" selected>🟡 보통</option>
                        <option value="1">🟢 낮음</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label for="dueDateInput" class="option-label">마감일:</label>
                    <input type="date" id="dueDateInput" class="due-date-input">
                </div>
            </div>
        </section>

        <!-- 필터 섹션 -->
        <section class="filter-section" aria-label="할 일 필터">
            <div class="filter-container">
                <div class="filter-group">
                    <label class="filter-label">카테고리:</label>
                    <select id="categoryFilter" class="filter-select">
                        <option value="">전체</option>
                        <option value="개인">🙋‍♂️ 개인</option>
                        <option value="업무">💼 업무</option>
                        <option value="취미">🎨 취미</option>
                        <option value="건강">💪 건강</option>
                        <option value="학습">📚 학습</option>
                        <option value="쇼핑">🛒 쇼핑</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">상태:</label>
                    <select id="statusFilter" class="filter-select">
                        <option value="">전체</option>
                        <option value="pending">진행중</option>
                        <option value="completed">완료</option>
                        <option value="overdue">지연</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">정렬:</label>
                    <select id="sortSelect" class="filter-select">
                        <option value="date">날짜순</option>
                        <option value="priority">우선순위</option>
                        <option value="category">카테고리</option>
                        <option value="dueDate">마감일</option>
                        <option value="manual">수동정렬</option>
                    </select>
                </div>
            </div>
        </section>

        <section class="stats" aria-label="할 일 통계">
            <div class="stat-item">
                <span class="stat-number" id="totalTasks" aria-label="전체 할 일 개수">0</span>
                <span class="stat-label">전체</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="completedTasks" aria-label="완료된 할 일 개수">0</span>
                <span class="stat-label">완료</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="pendingTasks" aria-label="남은 할 일 개수">0</span>
                <span class="stat-label">진행중</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="overdueTasks" aria-label="지연된 할 일 개수">0</span>
                <span class="stat-label">지연</span>
            </div>
        </section>

        <!-- 통계 대시보드 (숨김 상태) -->
        <section class="dashboard hidden" id="dashboard" aria-label="상세 통계 대시보드">
            <div class="dashboard-header">
                <h3>📊 상세 통계</h3>
                <button id="closeDashboard" class="close-btn" aria-label="대시보드 닫기">✕</button>
            </div>
            
            <div class="dashboard-content">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h4>📈 진행률</h4>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span class="progress-text" id="progressText">0%</span>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h4>🔥 연속 완료</h4>
                        <div class="streak-counter">
                            <span class="streak-number" id="streakNumber">0</span>
                            <span class="streak-label">일 연속</span>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h4>📋 카테고리별</h4>
                        <div class="category-stats" id="categoryStats">
                            <!-- 동적으로 생성됩니다 -->
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h4>⏱️ 이번 주</h4>
                        <div class="weekly-stats" id="weeklyStats">
                            <div class="weekly-item">
                                <span class="weekly-label">완료:</span>
                                <span class="weekly-value" id="weeklyCompleted">0</span>
                            </div>
                            <div class="weekly-item">
                                <span class="weekly-label">추가:</span>
                                <span class="weekly-value" id="weeklyAdded">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 달력 섹션 -->
        <section class="calendar-section" aria-label="달력">
            <div class="calendar-controls">
                <div class="view-selector">
                    <button id="weekView" class="view-btn active" aria-label="주간 뷰">주간</button>
                    <button id="monthView" class="view-btn" aria-label="월간 뷰">월간</button>
                    <button id="yearView" class="view-btn" aria-label="연간 뷰">연간</button>
                </div>
                <div class="calendar-header">
                    <button id="prevPeriod" class="calendar-nav" aria-label="이전 기간">‹</button>
                    <h3 id="currentPeriod" class="calendar-title">2025년 8월</h3>
                    <button id="nextPeriod" class="calendar-nav" aria-label="다음 기간">›</button>
                </div>
            </div>

            <!-- 주간 뷰 컨테이너 -->
            <div id="weekViewContainer" class="calendar-container">
                <div class="calendar-weekdays">
                    <div class="weekday">일</div>
                    <div class="weekday">월</div>
                    <div class="weekday">화</div>
                    <div class="weekday">수</div>
                    <div class="weekday">목</div>
                    <div class="weekday">금</div>
                    <div class="weekday">토</div>
                </div>
                <div id="weekGrid" class="calendar-grid week-grid">
                    <!-- 주간 날짜들이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>

            <!-- 월간 뷰 컨테이너 -->
            <div id="monthViewContainer" class="calendar-container hidden">
                <div class="calendar-weekdays">
                    <div class="weekday">일</div>
                    <div class="weekday">월</div>
                    <div class="weekday">화</div>
                    <div class="weekday">수</div>
                    <div class="weekday">목</div>
                    <div class="weekday">금</div>
                    <div class="weekday">토</div>
                </div>
                <div id="monthGrid" class="calendar-grid month-grid">
                    <!-- 월간 달력 날짜들이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>

            <!-- 연간 뷰 컨테이너 -->
            <div id="yearViewContainer" class="calendar-container hidden">
                <div id="yearGrid" class="year-grid">
                    <!-- 연간 달력이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>

            <div class="date-selector">
                <button id="todayBtn" class="today-btn">오늘</button>
                <span id="selectedDate" class="selected-date">전체 할 일</span>
            </div>
        </section>

        <main class="todo-section" aria-label="할 일 목록">
            <!-- 드래그 앤 드롭 가이드 -->
            <div id="dragGuide" class="drag-guide hidden">
                <p>📋 드래그해서 순서를 변경하세요</p>
            </div>
            
            <ul id="todoList" class="todo-list" role="list">
                <!-- 할 일 목록이 여기에 동적으로 추가됩니다 -->
            </ul>
            
            <div id="emptyState" class="empty-state" role="status" aria-live="polite">
                <div class="empty-icon">📝</div>
                <p>등록된 할 일이 없습니다!</p>
                <p>위에서 새로운 할 일을 추가해보세요 ✨</p>
            </div>
        </main>

        <footer class="footer">
            <p>효율적인 하루 되세요! 💪</p>
            <div class="footer-actions">
                <button id="exportData" class="footer-btn" title="데이터 내보내기">
                    📤 내보내기
                </button>
                <input type="file" id="importData" accept=".json" style="display: none;">
                <button id="importBtn" class="footer-btn" title="데이터 가져오기">
                    📥 가져오기
                </button>
            </div>
        </footer>
    </div>

    <!-- 스와이프 액션 가이드 -->
    <div id="swipeGuide" class="swipe-guide hidden">
        <p>👈 완료 | 삭제 👉</p>
    </div>

    <!-- PWA 설치 프롬프트 -->
    <div id="installPrompt" class="install-prompt hidden">
        <div class="install-content">
            <h3>📱 앱으로 설치하기</h3>
            <p>홈 화면에 추가하여 더 빠르게 사용하세요!</p>
            <div class="install-actions">
                <button id="installBtn" class="install-btn">설치</button>
                <button id="dismissInstall" class="dismiss-btn">나중에</button>
            </div>
        </div>
    </div>

    <!-- 상태 업데이트용 라이브 영역 (접근성) -->
    <div aria-live="polite" aria-atomic="true" class="sr-only" id="statusUpdates"></div>

    <!-- 터치 피드백 -->
    <div id="touchFeedback" class="touch-feedback hidden">
        <span class="feedback-text"></span>
    </div>

    <script src="script.js"></script>
</body>
</html>